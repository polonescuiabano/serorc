<app-sidebar></app-sidebar>

<div class="relatorio-container">
  <h1>Relatório de Insumos</h1>

  <div class="filtro-relatorio">
    <h2>Filtro de Relatório</h2>

    <div class="campo">
      <label for="calcular">Calcular:</label>
      <select id="calcular" [(ngModel)]="metodoCalculo">
        <option value="">Selecione</option>
        <option value="media">Média</option>
        <option value="mediana">Mediana</option>
      </select>
    </div>

    <div class="campo">
      <label> Termo de Pesquisa: </label>
      <select [(ngModel)]="searchBy">
        <option value="codigo">Código</option>
        <option value="descricao">Descrição</option>
      </select>
    </div>

    <div class="campo">
      <label for="descricao">Descrição ou código:</label>
      <input type="text" id="descricao" [(ngModel)]="query" placeholder="Digite aqui..." />
    </div>

    <div class="botoes">
      <button (click)="gerarRelatorio()" class="btn-gerar">Gerar Relatório</button>
      <button (click)="buscar()" class="btn-buscar">Buscar</button>
      <button (click)="limpar()" class="btn-limpar">Limpar Pesquisa</button>
    </div>
  </div>

  <div *ngIf="resultados.length > 0" class="resultado-relatorio">
    <h3>Resultados:</h3>
    <table>
      <thead>
      <tr>
        <th>Código</th>
        <th>Nome</th>
        <th>Unidade</th>
        <th>Tipo</th>
        <th>Ações</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let insumo of resultados">
        <td>{{ insumo.codigo }}</td>
        <td>{{ insumo.nome }}</td>
        <td>{{ insumo.unidadeMedida }}</td>
        <td>{{ insumo.tipo }}</td>
        <td>
          <button (click)="selecionar(insumo)" [disabled]="isSelecionado(insumo)">Selecionar</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="insumosSelecionados.length > 0" class="insumos-selecionados">
    <h3>Selecionados para Relatório:</h3>
    <ul>
      <li *ngFor="let i of insumosSelecionados">
        {{ i.codigo }} - {{ i.nome }}
        <button (click)="removerSelecionado(i)">Remover</button>
      </li>
    </ul>
  </div>
</div>
